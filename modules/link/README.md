# terraform-aws-oam/link

Terraform module to implement AWS Observability Access Manager Link.

## Notes

### Typed config

An effort has been made to make configuration of the module strongly typed and not let you worry about inconsistent AWS naming. The downside of this is that the module will need updates anytime AWS changes.

### Metric forwarding

Enabling `var.include_custom_namespaces.metric_config` will add a negated expression to the query to match all namespaces that are not AWS.

### Log forwarding

Specifying wildcard log groups via  `var.log_group_config.wildcard_log_groups` needs entries that include a `%` for the wildcard character to function.

## Use

### Deployment

#### Examples
Please visit the annotated examples in the `./examples/` folder. They will explain how you can use the different variables to achieve different strategies.

<!-- BEGIN_TF_DOCS -->
## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | ~> 1.9 |
| <a name="requirement_aws"></a> [aws](#requirement\_aws) | ~> 5.72 |

## Providers

| Name | Version |
|------|---------|
| <a name="provider_aws"></a> [aws](#provider\_aws) | ~> 5.72 |

## Modules

No modules.

## Resources

| Name | Type |
|------|------|
| [aws_oam_link.default](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/oam_link) | resource |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_sink_arn"></a> [sink\_arn](#input\_sink\_arn) | Arn of sink to link to. | `string` | n/a | yes |
| <a name="input_label_template"></a> [label\_template](#input\_label\_template) | Human-readable name to use to identify this source account when you are viewing data from it in the monitoring account. | `string` | `"$AccountName"` | no |
| <a name="input_log_group_config"></a> [log\_group\_config](#input\_log\_group\_config) | Specify explicit log groups or wildcard log groups for LogGroupConfiguration. | <pre>object({<br/>    explicit_log_groups = optional(list(string), [])<br/>    wildcard_log_groups = optional(list(string), [])<br/>  })</pre> | `{}` | no |
| <a name="input_metric_config"></a> [metric\_config](#input\_metric\_config) | Specify AWS namespaces to include in MetricConfiguration and whether to include custom namespaces. | <pre>object({<br/>    aws_namespaces = optional(object({<br/>      # ordering here looks off, but is in line with:<br/>      # https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/aws-services-cloudwatch-metrics.html<br/>      amplify_hosting                     = optional(bool, false)<br/>      api_gateway                         = optional(bool, false)<br/>      app_flow                            = optional(bool, false)<br/>      mgn                                 = optional(bool, false)<br/>      app_runner                          = optional(bool, false)<br/>      app_stream                          = optional(bool, false)<br/>      app_sync                            = optional(bool, false)<br/>      athena                              = optional(bool, false)<br/>      backup                              = optional(bool, false)<br/>      bedrock                             = optional(bool, false)<br/>      billing                             = optional(bool, false)<br/>      braket_by_device                    = optional(bool, false)<br/>      certificate_manager                 = optional(bool, false)<br/>      acm_private_ca                      = optional(bool, false)<br/>      chatbot                             = optional(bool, false)<br/>      chime_voice_connector               = optional(bool, false)<br/>      chime_sdk                           = optional(bool, false)<br/>      client_vpn                          = optional(bool, false)<br/>      cloud_front                         = optional(bool, false)<br/>      cloud_hsm                           = optional(bool, false)<br/>      cloud_search                        = optional(bool, false)<br/>      cloud_trail                         = optional(bool, false)<br/>      cw_agent                            = optional(bool, false)<br/>      application_signals                 = optional(bool, false)<br/>      cloudwatch_metric_streams           = optional(bool, false)<br/>      rum                                 = optional(bool, false)<br/>      cloudwatch_synthetics               = optional(bool, false)<br/>      logs                                = optional(bool, false)<br/>      code_build                          = optional(bool, false)<br/>      code_whisperer                      = optional(bool, false)<br/>      cognito                             = optional(bool, false)<br/>      comprehend                          = optional(bool, false)<br/>      config                              = optional(bool, false)<br/>      connect                             = optional(bool, false)<br/>      data_lifecyle_manager               = optional(bool, false)<br/>      data_sync                           = optional(bool, false)<br/>      dev_ops_guru                        = optional(bool, false)<br/>      database_migration_service          = optional(bool, false)<br/>      direct_connect                      = optional(bool, false)<br/>      directory_service                   = optional(bool, false)<br/>      document_db                         = optional(bool, false)<br/>      dynamo_db                           = optional(bool, false)<br/>      dynamo_db_accelerator               = optional(bool, false)<br/>      ec2                                 = optional(bool, false)<br/>      elastic_gpus                        = optional(bool, false)<br/>      ec2_spot                            = optional(bool, false)<br/>      auto_scaling                        = optional(bool, false)<br/>      elastic_beanstalk                   = optional(bool, false)<br/>      ebs                                 = optional(bool, false)<br/>      ecr                                 = optional(bool, false)<br/>      ecs                                 = optional(bool, false)<br/>      ecs_container_insights              = optional(bool, false)<br/>      ecs_managed_scaling                 = optional(bool, false)<br/>      efs                                 = optional(bool, false)<br/>      elastic_interface                   = optional(bool, false)<br/>      container_insights                  = optional(bool, false)<br/>      application_elb                     = optional(bool, false)<br/>      network_elb                         = optional(bool, false)<br/>      gateway_elb                         = optional(bool, false)<br/>      elb                                 = optional(bool, false)<br/>      elastic_transcoder                  = optional(bool, false)<br/>      elasti_cache                        = optional(bool, false)<br/>      es                                  = optional(bool, false)<br/>      elastic_map_reduce                  = optional(bool, false)<br/>      media_connect                       = optional(bool, false)<br/>      media_convert                       = optional(bool, false)<br/>      media_live                          = optional(bool, false)<br/>      media_package                       = optional(bool, false)<br/>      media_store                         = optional(bool, false)<br/>      media_tailor                        = optional(bool, false)<br/>      sms_voice                           = optional(bool, false)<br/>      social_messaging                    = optional(bool, false)<br/>      events                              = optional(bool, false)<br/>      fsx                                 = optional(bool, false)<br/>      game_lift                           = optional(bool, false)<br/>      global_accelerator                  = optional(bool, false)<br/>      glue                                = optional(bool, false)<br/>      ground_station                      = optional(bool, false)<br/>      health_lake                         = optional(bool, false)<br/>      inspector                           = optional(bool, false)<br/>      ivs                                 = optional(bool, false)<br/>      ivs_chat                            = optional(bool, false)<br/>      iot                                 = optional(bool, false)<br/>      iot_analytics                       = optional(bool, false)<br/>      iot_fleet_wise                      = optional(bool, false)<br/>      iot_site_wise                       = optional(bool, false)<br/>      iot_twin_maker                      = optional(bool, false)<br/>      kms                                 = optional(bool, false)<br/>      cassandra                           = optional(bool, false)<br/>      kinesis_analytics                   = optional(bool, false)<br/>      firehose                            = optional(bool, false)<br/>      kinesis                             = optional(bool, false)<br/>      kinesis_video                       = optional(bool, false)<br/>      lambda                              = optional(bool, false)<br/>      lex                                 = optional(bool, false)<br/>      license_manager_license_usage       = optional(bool, false)<br/>      license_manager_linux_subscriptions = optional(bool, false)<br/>      location                            = optional(bool, false)<br/>      lookout_equipment                   = optional(bool, false)<br/>      lookout_metrics                     = optional(bool, false)<br/>      lookout_vision                      = optional(bool, false)<br/>      ml                                  = optional(bool, false)<br/>      managed_blockchain                  = optional(bool, false)<br/>      prometheus                          = optional(bool, false)<br/>      kafka                               = optional(bool, false)<br/>      kafka_connect                       = optional(bool, false)<br/>      mwaa                                = optional(bool, false)<br/>      memory_db                           = optional(bool, false)<br/>      amazon_mq                           = optional(bool, false)<br/>      neptune                             = optional(bool, false)<br/>      network_firewall                    = optional(bool, false)<br/>      network_manager                     = optional(bool, false)<br/>      nimble_studio                       = optional(bool, false)<br/>      omics                               = optional(bool, false)<br/>      ops_works                           = optional(bool, false)<br/>      outposts                            = optional(bool, false)<br/>      panorama_device_metrics             = optional(bool, false)<br/>      personalize                         = optional(bool, false)<br/>      pinpoint                            = optional(bool, false)<br/>      polly                               = optional(bool, false)<br/>      private_link_endpoints              = optional(bool, false)<br/>      private_link_services               = optional(bool, false)<br/>      private_5g                          = optional(bool, false)<br/>      qldb                                = optional(bool, false)<br/>      quick_sight                         = optional(bool, false)<br/>      redshift                            = optional(bool, false)<br/>      rds                                 = optional(bool, false)<br/>      rekognition                         = optional(bool, false)<br/>      re_post_private                     = optional(bool, false)<br/>      robomaker                           = optional(bool, false)<br/>      route53                             = optional(bool, false)<br/>      route53_recovery_readiness          = optional(bool, false)<br/>      sage_maker                          = optional(bool, false)<br/>      sage_maker_model_building_pipeline  = optional(bool, false)<br/>      secrets_manager                     = optional(bool, false)<br/>      security_lake                       = optional(bool, false)<br/>      service_catalog                     = optional(bool, false)<br/>      ddos_protection                     = optional(bool, false)<br/>      ses                                 = optional(bool, false)<br/>      sim_space_weaver                    = optional(bool, false)<br/>      sns                                 = optional(bool, false)<br/>      sqs                                 = optional(bool, false)<br/>      s3                                  = optional(bool, false)<br/>      s3_storage_lens                     = optional(bool, false)<br/>      swf                                 = optional(bool, false)<br/>      states                              = optional(bool, false)<br/>      storage_gateway                     = optional(bool, false)<br/>      ssm_run_command                     = optional(bool, false)<br/>      textract                            = optional(bool, false)<br/>      timestream                          = optional(bool, false)<br/>      transfer                            = optional(bool, false)<br/>      transcribe                          = optional(bool, false)<br/>      translate                           = optional(bool, false)<br/>      trusted_advisor                     = optional(bool, false)<br/>      nat_gateway                         = optional(bool, false)<br/>      transit_gateway                     = optional(bool, false)<br/>      vpn                                 = optional(bool, false)<br/>      ipam                                = optional(bool, false)<br/>      waf                                 = optional(bool, false)<br/>      waf_v2                              = optional(bool, false)<br/>      work_mail                           = optional(bool, false)<br/>      work_spaces                         = optional(bool, false)<br/>      work_spaces_web                     = optional(bool, false)<br/>    }), {})<br/>    include_custom_namespaces = optional(bool, false)<br/>  })</pre> | `{}` | no |
| <a name="input_resource_types"></a> [resource\_types](#input\_resource\_types) | Specify resource types for the link | <pre>object({<br/>    insights          = optional(bool, false)<br/>    internet_monitors = optional(bool, false)<br/>    logs              = optional(bool, false)<br/>    metrics           = optional(bool, false)<br/>    traces            = optional(bool, false)<br/>  })</pre> | `{}` | no |
| <a name="input_tags"></a> [tags](#input\_tags) | Tags to be added to the specific resource | `map(string)` | `{}` | no |

## Outputs

No outputs.
<!-- END_TF_DOCS -->
